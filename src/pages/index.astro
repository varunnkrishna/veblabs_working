---
import { defaultLang, supportedLanguages } from '../i18n/config';

// Get browser language
const browserLang = Astro.request.headers.get('accept-language')?.split(',')[0].split('-')[0];

// Check if browser language is supported, otherwise use default
const targetLang = browserLang && Object.keys(supportedLanguages).includes(browserLang) 
  ? browserLang 
  : defaultLang;

// Perform redirect with 301 status for better SEO
return new Response("", {
  status: 301,
  headers: {
    "Location": `/${targetLang}`
  }
});
---