---
import { getLanguageFromURL, useTranslations, getLanguageDirection } from '../i18n/utils';
import type { HeroTranslations } from '../i18n/types';

const lang = getLanguageFromURL(Astro.url.pathname);
const t = useTranslations(lang);
const isRTL = getLanguageDirection(lang) === 'rtl';

// Load translations
const heroTranslations = await t('hero') as HeroTranslations;
const { verticalTab } = heroTranslations;
---

<div class="w-full pt-12 pb-24 px-4 sm:px-6 lg:px-8">
    <div class="prose dark:prose-invert max-w-[850px] mx-auto text-center pt-24 pb-8">
        <h2 class="text-5xl font-extrabold tracking-tight bg-gradient-to-br from-light-primary via-blue-600 to-purple-600 dark:from-dark-primary dark:via-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-8 leading-tight">
            {verticalTab.title}
        </h2>
        <p class="text-xl text-light-textSecondary dark:text-dark-textSecondary leading-relaxed tracking-wide max-w-2xl mx-auto font-medium">
            {verticalTab.description}
        </p>
    </div>

    <div class="w-full max-w-7xl mx-auto">
        <div class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden border border-gray-200/20 dark:border-gray-700/20">
            <div class="grid grid-cols-1 md:grid-cols-12 w-full" id="vertical-tabs">
                <div class={`w-full md:col-span-4 bg-gradient-to-b from-gray-50/90 to-gray-100/90 dark:from-gray-800/90 dark:to-gray-900/90 p-4 md:p-6 border-b ${isRTL ? 'md:border-l md:border-r-0 order-2' : 'md:border-r order-1'} border-gray-200/50 dark:border-gray-700/50 backdrop-blur-lg`}>
                    <nav class={`flex md:flex-col overflow-x-auto md:overflow-x-visible ${isRTL ? 'space-x-reverse' : 'space-x-2'} md:space-x-0 md:space-y-3`}>
                        <button class="tab-link active-tab flex-shrink-0 w-auto md:w-full px-5 md:px-6 py-4 md:py-5 rounded-xl transition-all duration-300 flex items-center space-x-4 bg-gradient-to-r from-light-primary to-light-secondary dark:from-dark-primary dark:to-dark-secondary text-white shadow-lg shadow-light-primary/20 dark:shadow-dark-primary/20 hover:shadow-light-primary/30 dark:hover:shadow-dark-primary/30 hover:scale-[1.02] active:scale-[0.98]" data-tab="profile">
                            <svg xmlns="http://www.w3.org/2000/svg" class={`h-5 w-5 flex-shrink-0 ${isRTL ? 'ml-4' : 'mr-4'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span class={`font-medium tracking-wide whitespace-nowrap ${isRTL ? 'text-right' : 'text-left'}`}>{verticalTab.tabs.datadriven}</span>
                        </button>

                        <button class="tab-link flex-shrink-0 w-auto md:w-full px-5 md:px-6 py-4 md:py-5 rounded-xl transition-all duration-300 flex items-center space-x-4 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 shadow-lg shadow-gray-200/20 dark:shadow-gray-900/30 hover:bg-gray-50 dark:hover:bg-gray-800 hover:scale-[1.02] active:scale-[0.98]" data-tab="mobile-first">
                            <svg xmlns="http://www.w3.org/2000/svg" class={`h-5 w-5 flex-shrink-0 ${isRTL ? 'ml-4' : 'mr-4'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a1 1 0 001-1V4a1 1 0 00-1-1H8a1 1 0 00-1 1v16a1 1 0 001 1z" />
                            </svg>
                            <span class={`font-medium tracking-wide whitespace-nowrap ${isRTL ? 'text-right' : 'text-left'}`}>{verticalTab.tabs.seamless}</span>
                        </button>

                        <button class="tab-link flex-shrink-0 w-auto md:w-full px-5 md:px-6 py-4 md:py-5 rounded-xl transition-all duration-300 flex items-center space-x-4 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 shadow-lg shadow-gray-200/20 dark:shadow-gray-900/30 hover:bg-gray-50 dark:hover:bg-gray-800 hover:scale-[1.02] active:scale-[0.98]" data-tab="seo">
                            <svg xmlns="http://www.w3.org/2000/svg" class={`h-5 w-5 flex-shrink-0 ${isRTL ? 'ml-4' : 'mr-4'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                            </svg>
                            <span class={`font-medium tracking-wide whitespace-nowrap ${isRTL ? 'text-right' : 'text-left'}`}>{verticalTab.tabs.custom}</span>
                        </button>

                        <button class="tab-link flex-shrink-0 w-auto md:w-full px-5 md:px-6 py-4 md:py-5 rounded-xl transition-all duration-300 flex items-center space-x-4 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 shadow-lg shadow-gray-200/20 dark:shadow-gray-900/30 hover:bg-gray-50 dark:hover:bg-gray-800 hover:scale-[1.02] active:scale-[0.98]" data-tab="responsive">
                            <svg xmlns="http://www.w3.org/2000/svg" class={`h-5 w-5 flex-shrink-0 ${isRTL ? 'ml-4' : 'mr-4'}`} fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1z" />
                            </svg>
                            <span class={`font-medium tracking-wide whitespace-nowrap ${isRTL ? 'text-right' : 'text-left'}`}>{verticalTab.tabs.multilanguage}</span>
                        </button>
                    </nav>
                </div>

                <div class={`w-full md:col-span-8 p-6 md:p-8 ${isRTL ? 'order-1' : 'order-2'}`}>
                    <div class="tab-content-container">
                        <!-- Profile Tab Content -->
                        <div class="tab-content space-y-6" data-content="profile">
                            <div class="prose dark:prose-invert max-w-none">
                                <div class="bg-white/90 dark:bg-gray-800/90 rounded-xl p-6 shadow-lg backdrop-blur-lg border border-gray-200/20 dark:border-gray-700/20">
                                    <h3 class="text-xl font-bold tracking-tight text-gray-900 dark:text-white mb-4">{verticalTab.tabs.datadriven}</h3>
                                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                                        {verticalTab.tabContent.datadriven}
                                    </p>
                                    <p class="text-gray-500 dark:text-gray-400 mt-4 leading-relaxed">
                                        <strong class="text-gray-700 dark:text-gray-300">{verticalTab.whyItMatters}</strong>
                                        {verticalTab.tabContent.datadrivenWhy}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Mobile First Tab Content -->
                        <div class="tab-content hidden space-y-6" data-content="mobile-first">
                            <div class="prose dark:prose-invert max-w-none ">
                                <div class="bg-white/90 dark:bg-gray-800/90 rounded-xl p-6 shadow-lg backdrop-blur-lg border border-gray-200/20 dark:border-gray-700/20">
                                    <h3 class="text-xl font-bold tracking-tight text-gray-900 dark:text-white mb-4">{verticalTab.tabs.seamless}</h3>
                                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                                        {verticalTab.tabContent.seamless}
                                    </p>
                                    <p class="text-gray-500 dark:text-gray-400 mt-4 leading-relaxed">
                                        <strong class="text-gray-700 dark:text-gray-300">{verticalTab.whyItMatters}</strong>
                                        {verticalTab.tabContent.seamlessWhy}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- SEO Tab Content -->
                        <div class="tab-content hidden space-y-6" data-content="seo">
                            <div class="prose dark:prose-invert max-w-none">
                                <div class="bg-white/90 dark:bg-gray-800/90 rounded-xl p-6 shadow-lg backdrop-blur-lg border border-gray-200/20 dark:border-gray-700/20">
                                    <h3 class="text-xl font-bold tracking-tight text-gray-900 dark:text-white mb-4">{verticalTab.tabs.custom}</h3>
                                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                                        {verticalTab.tabContent.custom}
                                    </p>
                                    <p class="text-gray-500 dark:text-gray-400 mt-4 leading-relaxed">
                                        <strong class="text-gray-700 dark:text-gray-300">{verticalTab.whyItMatters}</strong>
                                        {verticalTab.tabContent.customWhy}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Responsive Tab Content -->
                        <div class="tab-content hidden space-y-6" data-content="responsive">
                            <div class="prose dark:prose-invert max-w-none">
                                <div class="bg-white/90 dark:bg-gray-800/90 rounded-xl p-6 shadow-lg backdrop-blur-lg border border-gray-200/20 dark:border-gray-700/20">
                                    <h3 class="text-xl font-bold tracking-tight text-gray-900 dark:text-white mb-4">{verticalTab.tabs.multilanguage}</h3>
                                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                                        {verticalTab.tabContent.multilanguage}
                                    </p>
                                    <p class="text-gray-500 dark:text-gray-400 mt-4 leading-relaxed">
                                        <strong class="text-gray-700 dark:text-gray-300">{verticalTab.whyItMatters}</strong>
                                        {verticalTab.tabContent.multilanguageWhy}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Other tab contents follow the same pattern -->
                        <div class="tab-content hidden space-y-6" data-content="dashboard">
                            <!-- Similar structure for dashboard content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab-link');
    const contents = document.querySelectorAll('.tab-content');

    const updateActiveState = (clickedTab: HTMLElement) => {
        // Remove active state from all tabs
        tabs.forEach(tab => {
            tab.classList.remove('active-tab');
            tab.classList.remove('bg-gradient-to-r', 'from-light-primary', 'to-light-secondary', 'dark:from-dark-primary', 'dark:to-dark-secondary', 'text-white');
            tab.classList.add('bg-white', 'dark:bg-gray-900', 'text-gray-700', 'dark:text-gray-300');
        });

        // Add active state to clicked tab
        clickedTab.classList.add('active-tab');
        clickedTab.classList.add('bg-gradient-to-r', 'from-light-primary', 'to-light-secondary', 'dark:from-dark-primary', 'dark:to-dark-secondary', 'text-white');
        clickedTab.classList.remove('bg-white', 'dark:bg-gray-900', 'text-gray-700', 'dark:text-gray-300');

        // Hide all content
        contents.forEach(content => content.classList.add('hidden'));

        // Show content for clicked tab
        const tabId = clickedTab.getAttribute('data-tab');
        if (!tabId) return;

        const targetContent = document.querySelector(`[data-content="${tabId}"]`);
        if (targetContent instanceof HTMLElement) {
            targetContent.classList.remove('hidden');
        }
    };

    tabs.forEach(tab => {
        if (tab instanceof HTMLElement) {
            tab.addEventListener('click', (event) => {
                event.preventDefault();
                updateActiveState(tab);
            });
        }
    });
});
</script>