---
import { getCollection } from 'astro:content';
const testimonials = await getCollection('testimonials');
---

<div class="testimonial-slider relative">
  <div class="swiper">
    <div class="swiper-wrapper">
      {
        testimonials.map((testimonial) => (
          <div class="swiper-slide">
            <div class="testimonial-card bg-gradient-to-br from-purple-600 to-blue-500 dark:from-purple-900 dark:to-blue-800 p-6 rounded-xl shadow-lg mx-4 my-8">
              <div class="testimonial-content">
                <p class="text-white text-lg mb-6">"{testimonial.data.testimonial}"</p>
                <div class="flex items-center">
                  <img
                    src={testimonial.data.avatar}
                    alt={testimonial.data.author}
                    class="w-12 h-12 rounded-full mr-4"
                  />
                  <div>
                    <h4 class="text-white font-semibold">{testimonial.data.author}</h4>
                    <p class="text-white/80 text-sm">
                      {testimonial.data.role} at {testimonial.data.company}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
    <div class="swiper-pagination"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>

<script>
 
</script>

<style>
  .swiper {
    padding: 2rem 1rem;
  }

  .swiper-button-next,
  .swiper-button-prev {
    color: theme('colors.purple.500');
  }

  .swiper-pagination-bullet {
    background: theme('colors.purple.500');
  }

  .swiper-pagination-bullet-active {
    background: theme('colors.purple.700');
  }

  .testimonial-card {
    height: 100%;
    transition: transform 0.3s ease;
  }

  .testimonial-card:hover {
    transform: translateY(-5px);
  }

  @media (prefers-color-scheme: dark) {
    .testimonial-card {
      background: linear-gradient(to bottom right, #4c1d95, #1e3a8a);
    }
  }
</style>